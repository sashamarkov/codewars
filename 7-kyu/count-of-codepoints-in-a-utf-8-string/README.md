<h2><a href=https://www.codewars.com/kata/68b8e7f8ce76e77dcfb77e8a/train/lua target="_blank">Count of codepoints in a UTF-8 string</a></h2><h3>7 kyu</h3><p><a href="https://en.wikipedia.org/wiki/UTF-8" data-turbolinks="false" target="_blank">UTF-8</a> is a Unicode encoding. It is by far the dominant encoding for webpages, and is in widespread use for storing text files on disk or exchanging textual data between computers or programs.</p><p>UTF-8 is a <em>variable-length</em> encoding: the representation of a codepoint can take from <code>1</code> to <code>4</code> 8-bit <em>code-units</em> , depending on the codepoint's numerical value.</p><h2 id="the-problem">The Problem</h2><p>In languages where "strings" are really sequences of 8-bit bytes (C/C++, PHP, OCaml, Go, Lua...), UTF-8 is a possible encoding for them and usually has some level of language support. However, the function/method/property to retrieve the string's <em>length</em> actually returns the number of <em>bytes</em> in the string, not the number of <em>codepoints</em>.</p><h2 id="for-example">For example</h2><p>The codepoint of the emoji <code>ğŸ™‰</code> (<code>U+1F649</code>, <em>Hear-No-Evil Monkey</em>) is <code>0x1F649</code>.</p><pre><code class="language-lua">#<span class="cm-string">"ğŸ™‰"</span> <span class="cm-comment">-- 4</span></code></pre><h2 id="task">Task</h2><p>Write a function that returns the number of codepoints in a UTF-8 string.</p><pre><code class="language-javascript"><span class="cm-string">""</span>        <span class="cm-operator">--&gt;</span> <span class="cm-number">0</span><span class="cm-string">"AÃ¿â™ ğŸ™‰"</span>  <span class="cm-operator">--&gt;</span> <span class="cm-number">4</span><span class="cm-string">"Ã©"</span>       <span class="cm-operator">--&gt;</span> <span class="cm-number">1</span> (<span class="cm-variable">actual</span> <span class="cm-variable">Ã©</span> <span class="cm-variable">character</span>)<span class="cm-string">"eÌ"</span>       <span class="cm-operator">--&gt;</span> <span class="cm-number">2</span> (<span class="cm-variable">e</span> <span class="cm-operator">+</span> <span class="cm-variable">combining</span> <span class="cm-variable">acute</span> <span class="cm-variable">accent</span>)<span class="cm-string">"ã·Â©âˆ!é‡"</span> <span class="cm-operator">--&gt;</span> <span class="cm-number">5</span></code></pre><h2 id="see-also">See also</h2><p><a href="https://www.codewars.com/kata/599c4b69eb8e49effa000079" data-turbolinks="false" target="_blank">Same task</a> but in UTF-16, also a variable-length Unicode encoding.</p>