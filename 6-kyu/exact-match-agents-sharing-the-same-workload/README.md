<h2><a href=https://www.codewars.com/kata/6926de8ca1f37bc6445af392/train/sql target="_blank">Exact Match: Agents Sharing the Same Workload</a></h2><h3>6 kyu</h3><p>Imagine you are working for a large online customer-support platform. Support agents are assigned to various support tickets, and these assignments are stored in a database table called <code>agent_ticket_assignments</code>. Each ticket may require multiple agents, and each agent may be working across many tickets.</p><p>Management wants to identify agents who are working on exactly the same set of tickets. These "assignment twins" might represent duplicated workload, redundant routing rules, or natural teams that should be grouped together.</p><p>The <code>agent_ticket_assignments</code> table has the following structure:</p><ul><li><code>agent_id</code> (int): The ID of the support agent.</li><li><code>ticket_id</code> (int): The ID of the ticket assigned to the agent.</li></ul><p>Your task is to write a SQL query that identifies pairs of agents who have identical ticket assignment sets — meaning:</p><ul><li>Every ticket assigned to Agent A is also assigned to Agent B, and</li><li>Every ticket assigned to Agent B is also assigned to Agent A, and</li><li>No extra or missing tickets exist between them.</li></ul><p>Additionally, you must ensure that each pair is reported only once, regardless of ordering. You should always assign the smaller ID to the first output column and the larger ID to the second.</p><p>Output Columns:</p><ol><li><code>agent1_id</code>: The smaller agent ID in the pair</li><li><code>agent2_id</code>: The larger agent ID in the pair</li></ol><p>Output should be sorted first by <code>agent1_id</code> and then by <code>agent2_id</code>, both in ascending order.</p><p>Notes:</p><ol><li>An agent may appear in the table multiple times for the same ticket. Your query must correctly handle duplicates.</li><li>There are no "empty" agents — every agent that appears in the table has at least one ticket.</li></ol><p>For this sample data:</p><pre><code>| agent_id | ticket_id |+----------+-----------+| 101      | 5001      || 101      | 5002      || 102      | 5001      || 102      | 5002      || 303      | 6001      |</code></pre><p>the expected result is:</p><pre><code>| agent1_id | agent2_id |+-----------+-----------+| 101       | 102       |</code></pre><p>GLHF!</p>